<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
<a href="../index.html">⬆️  Up</a><br><hr>
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
	<link rel="stylesheet" href="../../style.css" />
	
	<title>Exherbo - Install</title>
</head>
<body>

<p><a href="https://www.exherbo.org/docs/install-guide.html">https://www.exherbo.org/docs/install-guide.html</a></p>

<p>This guide uses ptr-get that's part of CRUX not exherbo. <a href="https://linuxmind.dev/2025/09/02/how-to-install-the-operating-system-exherbo-linux/">https://linuxmind.dev/2025/09/02/how-to-install-the-operating-system-exherbo-linux/</a></p>

<p><a href="https://alexherbo2.github.io/wiki/exherbo/install-guide/">https://alexherbo2.github.io/wiki/exherbo/install-guide/</a></p>

<p><a href="https://gist.github.com/s0dyy/905be36b2c39fb8c14906e15c05c68a3">https://gist.github.com/s0dyy/905be36b2c39fb8c14906e15c05c68a3</a></p>

<p>Follow my KISS Linux Guide: <a href="https://imlauera.github.io/kisslinux/">https://imlauera.github.io/kisslinux/</a> and my archlinux install guide: <a href="https://imlauera.github.io/post/instalacion_arch_basica/">https://imlauera.github.io/post/instalacion_arch_basica/</a>.</p>

<p>It's better to read the whole <a href="https://www.gentoo.org/">Gentoo Handbook</a> .</p>

<hr>

<pre>
<code>
mount --mkdir /dev/sda3 /mnt/exherbo
mount -o rbind /dev /mnt/exherbo/dev/
mount -o rbind /sys /mnt/exherbo/sys/
mount -t proc none /mnt/exherbo/proc/
mount /dev/sda1 /mnt/exherbo/boot/
cp /etc/resolv.conf /mnt/exherbo/etc/resolv.conf
env -i TERM=$TERM SHELL=/bin/bash HOME=$HOME $(which chroot) /mnt/exherbo /bin/bash
source /etc/profile
export PS1="(chroot) $PS1"
cave search is too slow use
ls /var/db/paludis/repositories/*/packages/sys-kernel/
cave search linux-stable 
cd /usr/src
</code></pre>

Using the archlinux config file is a bad idea I was 10 hours compiling the kernel and I had to cancel it. Instead of doing this I ask claude ai to make me a .config file for my pc specs. LOL.

<pre><code>
curl -O https://gitlab.archlinux.org/archlinux/packaging/packages/linux/-/raw/main/config 
cp config /usr/src/linux/.config
 
# OR

# I don't recommend this because I'll take alot of time:
# if you already have archlinux: zcat /proc/config.gz > /usr/src/linux/.config

cd linux
</code></pre>

<p># keeps Arch’s choices.</p>
<p># auto-answers new options with defaults.</p>
<p># avoids interactive prompts</p>

<pre><code>
make olddefconfig
make -j$(nproc)
make modules_install
make install

cave resolve -x linux-headers
<code></pre>

<p> <b>Observacion</b> : Los linux headers NO son el kernel ni sirven para compilar el kernel completo.Linux-headers es la API del kernel. Son archivos de cabecera (.h) que describen la interfaz del kernel hacia el espacio de usuario y hacia módulos externos. Sirven para compilar modulos externos.

<b>Los headers deben coincidir con el kernel que estas usando</b>
</p>

<pre><code>
[I] esotericwarfare@arch ~> ls -ltr /mnt/exherbo/var/db/paludis/repositories/*/packages/sys-kernel/linux-headers/
total 112
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-5.16.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-5.15.exheres-0
-rw-r--r-- 1 root root  270 Jan  6 13:57 linux-headers-5.10.exheres-0
drwxr-xr-x 2 root root 4096 Jan  6 13:57 files
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.1.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.10.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.0.exheres-0
-rw-r--r-- 1 root root  270 Jan  6 13:57 linux-headers-5.4.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-5.19.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-5.18.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-5.17.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.16.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.15.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.14.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.13.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.12.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.11.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.6.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.5.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.4.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.3.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.2.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.18.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.17.exheres-0
-rw-r--r-- 1 root root 2193 Jan  6 13:57 linux-headers.exlib
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.9.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.8.exheres-0
-rw-r--r-- 1 root root  274 Jan  6 13:57 linux-headers-6.7.exheres-0
[I] esotericwarfare@arch ~> 
</code>
</pre>


<p>Los linux-headers deben coincidir con la version que descargas</p>

<p><a href="https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Kernel">https://wiki.gentoo.org/wiki/Handbook:AMD64/Installation/Kernel</a></p>

<pre>
<code>
ls -ltr /mnt/exherbo/var/db/paludis/repositories/*/packages/sys-kernel/linux-headers/

# OR
lynx kernel.org
# Latest Release - Download
tar xvf linux-*
cd linux-*
lspci -k
make defconfig
make help
make localyesconfig
make menuconfig

/ (slash)

CONFIG_PATA_ACPI

make localyesconfig

</code></pre>

<p>Or ask ClaudeAI to generate you a /usr/src/linux-version/.config file or a bash script based on your hardware with all the warnings that the command make localyesconfig outputs, lol.</p>

<pre><code>
make -j $(nproc)
# Si usas modulos tenes que usar initramsfs.
make modules_install 
# Copiara los archivos a /boot (tenes que tener la particion montada)
make install

# Esto hace el make install:
cp arch/x86/boot/bzImage /boot/kernel


vim /etc/paludis/options.conf
# Agrega la opcion: */* systemd

cave resolve -x sys-apps/systemd
Resolving: 1 steps, 3 metadata (3 arbor)


# Reinstall every package.

cave resolve world -cx

eclectic init list
eclectic init set systemd
echo "exherbo" | tee /etc/hostname
/etc/vconsole.conf
</code></pre>


<p>export PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"</p>

<pre><code>
# These packages I installed on gentoo
# sys-kernel/installkernel dracut uki
# sys-apps/systemd-utils boot kernel-install
# sys-kernel/installkernel
</code></pre>

<p>kernel-install add 6.18.3 /boot/vmlinuz-6.18.3</p>

<p># If that doesn't generate the initramfs try this command: </p>

<p>dracut --force --kver 6.18.4 /boot/initramfs-6.18.4.img</p>


<p>Esto ejecutalo desde tu otra distribucion de Linux y vas a tener que agregar un /etc/grub.d/40_custom probablemente porque no va a detectar bien el os-prober.</p>

<h3>Probablemente no necesitas ejecutar grub-install en tu otra distro (si estas instalando exherbo solo si)</h3>

<pre>
<code>
# efi
grub-install --target=x86_64-efi --efi-directory=/boot --removable

# legacy bios

grub-install --boot-directory=/mnt/boot /dev/sda --recheck 


vim /etc/grub.d/40_custom 

#!/bin/sh
exec tail -n +3 $0
# This file provides an easy way to add custom menu entries.  Simply type the
# menu entries you want to add after this comment.  Be careful not to change
# the 'exec tail' line above.

menuentry 'Exherbo Linux' --class exherbo --class gnu-linux --class gnu --class os {
        insmod part_gpt
        insmod ext2
        set root='hd0,gpt3'
        if [ x$feature_platform_search_hint = xy ]; then
          search --no-floppy --fs-uuid --set=root --hint-bios=hd0,gpt3 --hint-efi=hd0,gpt3 --hint-baremetal=ahci0,gpt3  57c5ee6d-dee8-43be-bfa4-d7f91eb993e7
        else
          search --no-floppy --fs-uuid --set=root 57c5ee6d-dee8-43be-bfa4-d7f91eb993e7
        fi
        linux (hd0,gpt1)/vmlinuz-6.18.4 root=UUID=57c5ee6d-dee8-43be-bfa4-d7f91eb993e7 rw
        initrd (hd0,gpt1)/initramfs-6.18.4.img
}

grub-mkconfig -o /boot/grub/grub.cfg

</code>
</pre>



<pre>
<code>
cat<<EOF > /etc/hosts
127.0.0.1       localhost
::1 localhost
127.0.0.1       exherbo.localdomain        exherbo
EOF


# Ahora para instalar linux-firmware, necesitás habilitar el repositorio ::hardware en Exherbo.


sudo mkdir -p /etc/paludis/repositories
sudo vim /etc/paludis/repositories/hardware.conf

format = e
location = /var/db/paludis/repositories/hardware
sync = git+https://git.exherbo.org/hardware.git


cave sync



cave resolve -x linux-firmware

# Luego de instalar el firmware deberas regenerar el initramfs.

dracut --force --kver 6.18.4 /boot/initramfs-6.18.4.img


passwd

localedef -i en_US -f ISO-8859-1 en_US
vim /etc/locale.gen # en_US.UTF-8
locale-gen
echo LANG="en_US.UTF-8" > /etc/env.d/99locale
ln -s /usr/share/zoneinfo/America/Buenos_Aires /etc/localtime
</code></pre>

# You need to create your user now and add it to the groups.

<pre>
<code>
useradd -m -G adm,disk,wheel,cdrom,audio,video,usb,users ${username}
passwd username


reboot
sudo systemctl enable sshd
sudo systemctl enable gpm
</code>
</pre>


<p><a href="http://0pointer.de/blog/projects/the-new-configuration-files">http://0pointer.de/blog/projects/the-new-configuration-files</a></p>

<h3>Post-installation Tasks</h3>

<p><a href="https://www.exherbo.org/docs/install-guide.html">https://www.exherbo.org/docs/install-guide.html</a></p>

<pre>
<code>
cave show stages
cave purge
cave update-world sys-devel/gdb
cave update-world -s stages
</code>
</pre>



</body>
</html>
